<UserControl x:Class="WPFGrowerApp.Views.SkippedReceiptDetailsDialogView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:converters="clr-namespace:WPFGrowerApp.Converters"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             MinWidth="700" MinHeight="500">
    
    <UserControl.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Header -->
            <RowDefinition Height="Auto"/> <!-- Summary -->
            <RowDefinition Height="*"/>    <!-- Data Grid -->
            <RowDefinition Height="Auto"/> <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="20,20,20,10">
            <TextBlock Text="{Binding Title}" 
                       Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                       HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Summary -->
        <StackPanel Grid.Row="1" Margin="20,0,20,10" Visibility="{Binding HasSkippedReceipts, Converter={StaticResource BooleanToVisibilityConverter}}">
            <TextBlock Text="{Binding SummaryText}" 
                       TextWrapping="Wrap"
                       Style="{StaticResource MaterialDesignBody1TextBlock}"
                       Margin="0,0,0,10"/>
        </StackPanel>

        <!-- Data Grid -->
        <ScrollViewer Grid.Row="2" 
                      VerticalScrollBarVisibility="Auto" 
                      HorizontalScrollBarVisibility="Auto"
                      Margin="20,0,20,10">
            <DataGrid ItemsSource="{Binding SkippedReceiptDetails}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      CanUserReorderColumns="False"
                      CanUserResizeColumns="True"
                      CanUserSortColumns="True"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      AlternatingRowBackground="{DynamicResource MaterialDesignDivider}"
                      Background="{DynamicResource MaterialDesignPaper}"
                      BorderBrush="{DynamicResource MaterialDesignDivider}"
                      BorderThickness="1">
                
                <DataGrid.Columns>
                    <!-- Receipt Number -->
                    <DataGridTextColumn Header="Receipt #" 
                                        Binding="{Binding ReceiptNumber}" 
                                        Width="80"
                                        IsReadOnly="True"/>
                    
                    <!-- Grower Info -->
                    <DataGridTextColumn Header="Grower" 
                                        Binding="{Binding GrowerName}" 
                                        Width="150"
                                        IsReadOnly="True"/>
                    
                    <DataGridTextColumn Header="Grower #" 
                                        Binding="{Binding GrowerNumber}" 
                                        Width="80"
                                        IsReadOnly="True"/>
                    
                    <!-- Product/Process -->
                    <DataGridTextColumn Header="Product" 
                                        Binding="{Binding Product}" 
                                        Width="80"
                                        IsReadOnly="True"/>
                    
                    <DataGridTextColumn Header="Process" 
                                        Binding="{Binding Process}" 
                                        Width="80"
                                        IsReadOnly="True"/>
                    
                    <!-- Weight -->
                    <DataGridTextColumn Header="Weight (lbs)" 
                                        Binding="{Binding NetWeight, StringFormat=N2}" 
                                        Width="100"
                                        IsReadOnly="True"/>
                    
                    <!-- Date -->
                    <DataGridTextColumn Header="Date" 
                                        Binding="{Binding ReceiptDate, StringFormat=yyyy-MM-dd}" 
                                        Width="100"
                                        IsReadOnly="True"/>
                    
                    <!-- Reason -->
                    <DataGridTextColumn Header="Reason" 
                                        Binding="{Binding Reason}" 
                                        Width="200"
                                        IsReadOnly="True"/>
                </DataGrid.Columns>
            </DataGrid>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="20,10,20,20">
            
            <Button Content="Close" 
                    Command="{Binding CloseCommand}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Width="100"/>
        </StackPanel>
    </Grid>
</UserControl>

