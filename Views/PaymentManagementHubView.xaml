<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="WPFGrowerApp.Views.PaymentManagementHubView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:WPFGrowerApp.Views"
             xmlns:vm="clr-namespace:WPFGrowerApp.ViewModels"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:converters="clr-namespace:WPFGrowerApp.Converters"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=vm:PaymentManagementHubViewModel, IsDesignTimeCreatable=False}"
             d:DesignHeight="900" d:DesignWidth="1400"
             Background="{DynamicResource MaterialDesignPaper}"
             Focusable="True"
             x:Name="paymentManagementHubView">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/StandardizedViewTemplate.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            
            <converters:BoolToVisibilityConverter x:Key="BoolToVisConverter"/>
            <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
            
            <!-- Enhanced Color Palette -->
            <SolidColorBrush x:Key="PrimaryBlue" Color="#1976D2"/>
            <SolidColorBrush x:Key="PrimaryBlueLight" Color="#E3F2FD"/>
            <SolidColorBrush x:Key="SecondaryGreen" Color="#4CAF50"/>
            <SolidColorBrush x:Key="AccentOrange" Color="#FF6B35"/>
            <SolidColorBrush x:Key="WarningYellow" Color="#FFC107"/>
            <SolidColorBrush x:Key="ErrorRed" Color="#F44336"/>
            <SolidColorBrush x:Key="BackgroundGray" Color="#FAFAFA"/>
            
            <!-- Enhanced Styles -->
            <Style x:Key="EnhancedBreadcrumbStyle" TargetType="materialDesign:ColorZone">
                <Setter Property="Mode" Value="PrimaryLight"/>
                <Setter Property="Background" Value="{StaticResource PrimaryBlueLight}"/>
                <Setter Property="Padding" Value="20,15"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
                <Setter Property="CornerRadius" Value="8"/>
            </Style>
            
            <Style x:Key="QuickActionsBarStyle" TargetType="materialDesign:Card">
                <Setter Property="Background" Value="{StaticResource BackgroundGray}"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
                <Setter Property="Padding" Value="20,15"/>
                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp1"/>
            </Style>
            
            <Style x:Key="EnhancedStatsCardStyle" TargetType="materialDesign:Card">
                <Setter Property="Margin" Value="0,0,0,25"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp3"/>
                <Setter Property="CornerRadius" Value="12"/>
            </Style>
            
            <Style x:Key="EnhancedActionCardStyle" TargetType="materialDesign:Card">
                <Setter Property="Margin" Value="8"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp2"/>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="MinHeight" Value="140"/>
                <Setter Property="MaxHeight" Value="180"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp4"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
            
            <Style x:Key="EnhancedActionButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="12"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource PrimaryBlueLight}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="22"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Foreground" Value="{StaticResource PrimaryBlue}"/>
                <Setter Property="Margin" Value="0,0,0,20"/>
            </Style>
            
            <Style x:Key="RecentActivityItemStyle" TargetType="Grid">
                <Setter Property="Margin" Value="0,8"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Padding" Value="10"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="{StaticResource PrimaryBlueLight}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
            
            <!-- Responsive Grid Style -->
            <Style x:Key="ResponsiveUniformGridStyle" TargetType="UniformGrid">
                <Setter Property="Columns" Value="4"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ActualWidth}" Value="0">
                        <Setter Property="Columns" Value="1"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ActualWidth}" Value="800">
                        <Setter Property="Columns" Value="2"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ActualWidth}" Value="1200">
                        <Setter Property="Columns" Value="3"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ActualWidth}" Value="1600">
                        <Setter Property="Columns" Value="4"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
            
            <!-- Animation Styles -->
            <Style x:Key="AnimatedCardStyle" TargetType="materialDesign:Card" BasedOn="{StaticResource EnhancedActionCardStyle}">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                   To="1.05" Duration="0:0:0.2"/>
                                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                   To="1.05" Duration="0:0:0.2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                        <Trigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                   To="1.0" Duration="0:0:0.2"/>
                                    <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                   To="1.0" Duration="0:0:0.2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.ExitActions>
                    </Trigger>
                </Style.Triggers>
                <Setter Property="RenderTransform">
                    <Setter.Value>
                        <TransformGroup>
                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                        </TransformGroup>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.InputBindings>
        <KeyBinding Key="F1" Command="{Binding ShowHelpCommand}"/>
        <KeyBinding Key="F5" Command="{Binding RefreshCommand}"/>
    </UserControl.InputBindings>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Enhanced Breadcrumb -->
            <RowDefinition Height="Auto"/>  <!-- Quick Actions Bar -->
            <RowDefinition Height="Auto"/>  <!-- Enhanced Stats Dashboard -->
            <RowDefinition Height="*"/>     <!-- Tabbed Main Content -->
            <RowDefinition Height="Auto"/>  <!-- Status Bar -->
        </Grid.RowDefinitions>

        <!-- Enhanced Breadcrumb Navigation -->
        <materialDesign:ColorZone Grid.Row="0" Style="{StaticResource EnhancedBreadcrumbStyle}">
            <StackPanel Orientation="Horizontal">
                <Button Style="{StaticResource MaterialDesignFlatButton}"
                        Padding="8,4"
                        Command="{Binding NavigateToDashboardCommand}">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Home" Width="20" Height="20" 
                                               VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Dashboard" FontSize="14" FontWeight="SemiBold"/>
                    </StackPanel>
                </Button>
                
                <materialDesign:PackIcon Kind="ChevronRight" Width="20" Height="20" 
                                       VerticalAlignment="Center" Margin="15,0" Opacity="0.6"/>
                
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" 
                            Background="{StaticResource PrimaryBlue}" 
                            CornerRadius="20" Padding="15,8">
                    <materialDesign:PackIcon Kind="CashMultiple" Width="20" Height="20" 
                                           VerticalAlignment="Center" Margin="0,0,8,0" 
                                           Foreground="White"/>
                    <TextBlock Text="Payment Management Hub" FontSize="14" FontWeight="SemiBold" 
                               Foreground="White"/>
                </StackPanel>
            </StackPanel>
        </materialDesign:ColorZone>

        <!-- Quick Actions Bar -->
        <materialDesign:Card Grid.Row="1" Style="{StaticResource QuickActionsBarStyle}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Quick Actions:" FontWeight="SemiBold" FontSize="16"
                           VerticalAlignment="Center" Margin="0,0,20,0"/>
                
                <Button Content="Run Payment Batch" 
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Background="{StaticResource SecondaryGreen}" 
                        Foreground="White" Margin="8,0"
                        Command="{Binding NavigateToPaymentRunCommand}"/>
                
                <Button Content="View All Batches" 
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        Margin="8,0" Command="{Binding NavigateToBatchesCommand}"/>
                
                <Button Content="Generate Reports" 
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        Margin="8,0" Command="{Binding NavigateToStatusDashboardCommand}"/>
                
                <Button Content="Refresh Data" 
                        Style="{StaticResource MaterialDesignIconButton}"
                        Margin="8,0" Command="{Binding RefreshCommand}">
                    <materialDesign:PackIcon Kind="Refresh" Width="20" Height="20"/>
                </Button>
            </StackPanel>
        </materialDesign:Card>

        <!-- Enhanced Statistics Dashboard -->
        <materialDesign:Card Grid.Row="2" Style="{StaticResource EnhancedStatsCardStyle}">
            <Grid Margin="25">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Pending Payments -->
                <Border Grid.Column="0" 
                        Background="{StaticResource AccentOrange}"
                        CornerRadius="12" 
                        Padding="20" 
                        Margin="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Icon and Title -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="ClockOutline" 
                                                   Width="28" Height="28" 
                                                   Foreground="White"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="Pending" FontSize="16" FontWeight="SemiBold" 
                                       Foreground="White" Margin="12,0,0,0" 
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- Main Number -->
                        <TextBlock Grid.Row="1" Text="{Binding PendingPayments, StringFormat='{}{0:N0}'}" 
                                   FontSize="36" FontWeight="Bold"
                                   Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        
                        <!-- Subtitle -->
                        <TextBlock Grid.Row="2" Text="Payments Awaiting Processing" 
                                   FontSize="13" FontWeight="SemiBold"
                                   Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                    </Grid>
                </Border>

                <!-- Active Batches -->
                <Border Grid.Column="1" 
                        Background="{StaticResource PrimaryBlue}"
                        CornerRadius="12" 
                        Padding="20" 
                        Margin="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Icon and Title -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="PackageVariant" 
                                                   Width="28" Height="28" 
                                                   Foreground="White"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="Active" FontSize="16" FontWeight="SemiBold" 
                                       Foreground="White" Margin="12,0,0,0" 
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- Main Number -->
                        <TextBlock Grid.Row="1" Text="{Binding ActiveBatches, StringFormat='{}{0:N0}'}" 
                                   FontSize="36" FontWeight="Bold"
                                   Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        
                        <!-- Subtitle -->
                        <TextBlock Grid.Row="2" Text="Payment Batches in Progress" 
                                   FontSize="13" FontWeight="SemiBold"
                                   Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                    </Grid>
                </Border>

                <!-- Cheques Ready -->
                <Border Grid.Column="2" 
                        Background="{StaticResource SecondaryGreen}"
                        CornerRadius="12" 
                        Padding="20" 
                        Margin="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Icon and Title -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="CheckbookArrowRight" 
                                                   Width="28" Height="28" 
                                                   Foreground="White"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="Ready" FontSize="16" FontWeight="SemiBold" 
                                       Foreground="White" Margin="12,0,0,0" 
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- Main Number -->
                        <TextBlock Grid.Row="1" Text="{Binding ChequesReady, StringFormat='{}{0:N0}'}" 
                                   FontSize="36" FontWeight="Bold"
                                   Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        
                        <!-- Subtitle -->
                        <TextBlock Grid.Row="2" Text="Cheques Ready for Delivery" 
                                   FontSize="13" FontWeight="SemiBold"
                                   Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                    </Grid>
                </Border>

                <!-- Electronic Payments -->
                <Border Grid.Column="3" 
                        Background="{StaticResource WarningYellow}"
                        CornerRadius="12" 
                        Padding="20" 
                        Margin="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Icon and Title -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="Bank" 
                                                   Width="28" Height="28" 
                                                   Foreground="White"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="Electronic" FontSize="16" FontWeight="SemiBold" 
                                       Foreground="White" Margin="12,0,0,0" 
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- Main Number -->
                        <TextBlock Grid.Row="1" Text="{Binding ElectronicPayments, StringFormat='{}{0:N0}'}" 
                                   FontSize="36" FontWeight="Bold"
                                   Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                        
                        <!-- Subtitle -->
                        <TextBlock Grid.Row="2" Text="Electronic Payment Batches" 
                                   FontSize="13" FontWeight="SemiBold"
                                   Foreground="White" HorizontalAlignment="Center" Opacity="0.9"/>
                    </Grid>
                </Border>
            </Grid>
        </materialDesign:Card>

        <!-- Tabbed Main Content -->
        <TabControl Grid.Row="3" Style="{StaticResource MaterialDesignTabControl}">
            <!-- Payment Processing Tab -->
            <TabItem Header="Payment Processing">
                <TabItem.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="CashMultiple" Width="20" Height="20" 
                                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Payment Processing" FontWeight="SemiBold"/>
                        </StackPanel>
                    </DataTemplate>
                </TabItem.HeaderTemplate>
                
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <UniformGrid Columns="4" Margin="0,0,0,20">
                        <UniformGrid.Style>
                            <Style TargetType="UniformGrid">
                                <Style.Triggers>
                                    <Trigger Property="ActualWidth" Value="0">
                                        <Setter Property="Columns" Value="1"/>
                                    </Trigger>
                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}" Value="800">
                                        <Setter Property="Columns" Value="2"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}" Value="1200">
                                        <Setter Property="Columns" Value="3"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}" Value="1600">
                                        <Setter Property="Columns" Value="4"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </UniformGrid.Style>
                        <!-- Run Advance Payments -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToPaymentRunCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource AccentOrange}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="RocketLaunch" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Run Advance Payments" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Process pending payments to growers" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>

                        <!-- Payment Groups -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToPaymentGroupsCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource PrimaryBlue}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="AccountGroup" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Payment Groups" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Configure payment groups &amp; settings" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>

                        <!-- Distribution -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToDistributionCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource SecondaryGreen}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="ShareVariant" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Distribution" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Distribute payments to growers" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>

                        <!-- Batch Management -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToBatchesCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource WarningYellow}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="PackageVariant" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Batch Management" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Track &amp; manage payment batches" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>
                    </UniformGrid>
                </ScrollViewer>
            </TabItem>

            <!-- Cheque Operations Tab -->
            <TabItem Header="Cheque Operations">
                <TabItem.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="CheckbookArrowRight" Width="20" Height="20" 
                                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Cheque Operations" FontWeight="SemiBold"/>
                        </StackPanel>
                    </DataTemplate>
                </TabItem.HeaderTemplate>
                
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <UniformGrid Columns="3" Margin="0,0,0,20">
                        <UniformGrid.Style>
                            <Style TargetType="UniformGrid">
                                <Style.Triggers>
                                    <Trigger Property="ActualWidth" Value="0">
                                        <Setter Property="Columns" Value="1"/>
                                    </Trigger>
                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}" Value="600">
                                        <Setter Property="Columns" Value="2"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth}" Value="900">
                                        <Setter Property="Columns" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </UniformGrid.Style>
                        <!-- Prepare Cheques -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToChequePreparationCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource SecondaryGreen}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="CheckbookArrowRight" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Prepare Cheques" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Generate and print cheques" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>

                        <!-- Review Cheques -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToChequeReviewCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource PrimaryBlue}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="ClipboardCheckOutline" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Review Cheques" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Review and approve cheques" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>

                        <!-- Deliver Cheques -->
                        <materialDesign:Card Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToChequeDeliveryCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource AccentOrange}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="TruckDeliveryOutline" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Deliver Cheques" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Record delivery of cheques" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Ready" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>
                    </UniformGrid>
                </ScrollViewer>
            </TabItem>

            <!-- Reports & Status Tab -->
            <TabItem Header="Reports & Status">
                <TabItem.HeaderTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ChartLine" Width="20" Height="20" 
                                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Reports & Status" FontWeight="SemiBold"/>
                        </StackPanel>
                    </DataTemplate>
                </TabItem.HeaderTemplate>
                
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Status Dashboard -->
                        <materialDesign:Card Grid.Row="0" Margin="0,0,0,20" Style="{StaticResource AnimatedCardStyle}">
                            <Button Command="{Binding NavigateToStatusDashboardCommand}"
                                    Style="{StaticResource EnhancedActionButtonStyle}">
                                <Grid Margin="20">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    
                                    <!-- Icon with background circle -->
                                    <Border Grid.Row="0" Width="60" Height="60" 
                                            Background="{StaticResource PrimaryBlue}" CornerRadius="30" 
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:PackIcon Kind="ViewDashboard" 
                                                                 Width="32" Height="32" 
                                                                 Foreground="White"/>
                                    </Border>
                                    
                                    <!-- Title -->
                                    <TextBlock Grid.Row="1" Text="Payment Status Dashboard" 
                                               FontWeight="SemiBold" FontSize="16" 
                                               HorizontalAlignment="Center" Margin="0,15,0,8"/>
                                    
                                    <!-- Description -->
                                    <TextBlock Grid.Row="2" Text="Monitor payment status and delivery tracking" 
                                               FontSize="13" Opacity="0.8" TextWrapping="Wrap" 
                                               HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    
                                    <!-- Status indicator -->
                                    <Border Grid.Row="3" Background="{StaticResource SecondaryGreen}" 
                                            CornerRadius="10" Padding="8,4" HorizontalAlignment="Center">
                                        <TextBlock Text="Active" FontSize="11" FontWeight="Bold" 
                                                   Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Button>
                        </materialDesign:Card>

                        <!-- Recent Activity Section -->
                        <materialDesign:Card Grid.Row="1" Style="{StaticResource AnimatedCardStyle}">
                            <Grid Margin="20">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Text="Recent Activity" 
                                           Style="{StaticResource SectionHeaderStyle}"/>
                                
                                <ListView Grid.Row="1" ItemsSource="{Binding RecentActivities}">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Style="{StaticResource RecentActivityItemStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <materialDesign:PackIcon Kind="{Binding IconKind}" 
                                                                         Width="20" Height="20" 
                                                                         Foreground="{Binding IconColor}"/>
                                                
                                                <StackPanel Grid.Column="1" Margin="10,0">
                                                    <TextBlock Text="{Binding Description}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Timestamp}" FontSize="12" Opacity="0.7"/>
                                                </StackPanel>
                                                
                                                <TextBlock Grid.Column="2" Text="{Binding Status}" 
                                                           FontSize="12" Opacity="0.7"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Grid>
                        </materialDesign:Card>
                    </Grid>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Enhanced Status Bar -->
        <materialDesign:ColorZone Grid.Row="4" Style="{StaticResource StatusFooterBarStyle}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="Information" Width="16" Height="16" 
                                           VerticalAlignment="Center" Margin="0,0,8,0" 
                                           Foreground="{StaticResource PrimaryBlue}"/>
                    <TextBlock Text="Status: " FontWeight="SemiBold" FontSize="13"/>
                    <TextBlock Text="{Binding StatusMessage}" FontSize="13" 
                               Foreground="{StaticResource PrimaryBlue}"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="HelpCircle" Width="16" Height="16" 
                                           VerticalAlignment="Center" Margin="0,0,8,0" 
                                           Foreground="{StaticResource PrimaryBlue}"/>
                    <TextBlock Text="Press F1 for help | F5 to refresh" FontSize="11" Opacity="0.8"/>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>

        <!-- Enhanced Loading Indicator -->
        <materialDesign:Card Grid.Row="0" 
                            Grid.RowSpan="5"
                            Background="{StaticResource PrimaryBlueLight}"
                            Opacity="0.95"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisConverter}}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                                Width="40" Height="40"
                                Value="0"
                                IsIndeterminate="True"
                                Foreground="{StaticResource PrimaryBlue}"/>
                    <TextBlock Text="Loading payment management hub..."
                              VerticalAlignment="Center"
                              Margin="20,0,0,0"
                              FontSize="16"
                              FontWeight="SemiBold"
                              Foreground="{StaticResource PrimaryBlue}"/>
                </StackPanel>
            </Grid>
        </materialDesign:Card>
    </Grid>
</UserControl>
